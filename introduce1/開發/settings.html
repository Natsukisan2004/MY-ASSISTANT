<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ã‚·ãƒ³ãƒ—ãƒ«ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
</head>
<body>


<!-- â–¼â–¼â–¼ ãƒ˜ãƒƒãƒ€ãƒ¼ï¼†ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ ã“ã“ã‹ã‚‰ â–¼â–¼â–¼ -->
<header id="mainHeader" class="main-header">
  <h1>ãƒã‚¤ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</h1>
  <nav class="global-nav">
    <ul class="nav-list">
      <li><a href="calendar.html" class="nav-link active" id="navCalendar">ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</a></li>
      <li><a href="profile.html" class="nav-link" id="navProfile">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</a></li>
      <li><a href="settings.html" class="nav-link" id="navSettings">è¨­å®š</a></li>

    </ul>
  </nav>
  
</header>

<font size="10">âš ï¸å·¥äº‹ä¸­âš ï¸</font>

<!-- è¨­å®šç”¨ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¾ã¨ã‚ã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
<footer class="settings-footer">
  <div class="lang-setting">
    <label for="langSelect">è¨€èªè¨­å®š:</label>
    <select id="langSelect" class="lang-select">
      <option value="ja">æ—¥æœ¬èª</option>
      <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
      <option value="en">English</option>
      <option value="zh">ä¸­æ–‡</option>
    </select>
  </div>

  <div class="header-img-setting" style="margin-top: 10px;">
    <button id="changeHeaderImgBtn" class="header-img-btn">ãƒ˜ãƒƒãƒ€ãƒ¼ç”»åƒå¤‰æ›´</button>
    <input type="file" id="headerImgInput" accept="image/*" style="display:none;">
  </div>

<section class="feedback-section">
  <h3>ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯å“è³ª</h3>
  <form id="moodForm">
    <div class="mood-buttons">
      <input type="radio" name="mood" value="great" id="mood1">
      <label for="mood1">ã™ã”ãè‰¯ã„</label><br>

      <input type="radio" name="mood" value="good" id="mood2">
      <label for="mood2">è‰¯ã„</label><br>

      <input type="radio" name="mood" value="normal" id="mood3">
      <label for="mood3">æ™®é€š</label><br>

      <input type="radio" name="mood" value="bad" id="mood4">
      <label for="mood4">æ‚ªã„</label><br>

      <input type="radio" name="mood" value="terrible" id="mood5">
      <label for="mood5">ã™ã”ãæ‚ªã„</label>
    </div>
  </form>
</section>
<section class="volume-section">
  <h3>éŸ³é‡èª¿ç¯€</h3>
  <input type="range" id="volumeSlider" min="0" max="100" value="50">
  <span id="volumeValue">50</span>%
</section>

</footer>


<script>
  // ãƒ˜ãƒƒãƒ€ãƒ¼ç”»åƒå¤‰æ›´æ©Ÿèƒ½
  document.addEventListener('DOMContentLoaded', () => {
    const changeHeaderImgBtn = document.getElementById('changeHeaderImgBtn');
    const headerImgInput = document.getElementById('headerImgInput');
    const mainHeader = document.getElementById('mainHeader');

    // ä¿å­˜ç”»åƒãŒã‚ã‚Œã°é©ç”¨
    const savedImg = localStorage.getItem('headerBgImg');
    if (savedImg && mainHeader) {
      mainHeader.style.backgroundImage = `url('${savedImg}')`;
    }

    if (changeHeaderImgBtn && headerImgInput && mainHeader) {
      changeHeaderImgBtn.addEventListener('click', () => {
        headerImgInput.click();
      });
      headerImgInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function(ev) {
          mainHeader.style.backgroundImage = `url('${ev.target.result}')`;
          localStorage.setItem('headerBgImg', ev.target.result);
        };
        reader.readAsDataURL(file);
      });
    }
  });
</script>
<script>
  // è¨€èªè¨­å®šæ©Ÿèƒ½
  document.addEventListener('DOMContentLoaded', () => {
    const langSelect = document.getElementById('langSelect');
    // ä¿å­˜ã•ã‚ŒãŸè¨€èªã‚’é©ç”¨
    const savedLang = localStorage.getItem('calendarLang') || 'ja';
    langSelect.value = savedLang;

    // UIãƒ†ã‚­ã‚¹ãƒˆ
    const texts = {
      ja: {
        calendar: 'ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼',
        profile: 'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«',
        settings: 'è¨­å®š',
        changeHeader: 'ãƒ˜ãƒƒãƒ€ãƒ¼ç”»åƒå¤‰æ›´',
        chat: 'ğŸ’¬ ãƒãƒ£ãƒƒãƒˆ',
        apiSetting: 'APIè¨­å®š',
        addEvent: 'äºˆå®šã‚’è¿½åŠ ',
        save: 'ä¿å­˜',
        delete: 'å‰Šé™¤',
        welcome: 'ã‚ˆã†ã“ã'
      },
      ru: {
        calendar: 'ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ',
        profile: 'ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ',
        settings: 'ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸',
        changeHeader: 'Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ ÑˆĞ°Ğ¿ĞºĞ¸',
        chat: 'ğŸ’¬ Ğ§Ğ°Ñ‚',
        apiSetting: 'ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ API',
        addEvent: 'Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ',
        save: 'Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ',
        delete: 'Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ',
        welcome: 'Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ'
      },
      en: {
        calendar: 'Calendar',
        profile: 'Profile',
        settings: 'Settings',
        changeHeader: 'Change Header Image',
        chat: 'ğŸ’¬ Chat',
        apiSetting: 'API Settings',
        addEvent: 'Add Event',
        save: 'Save',
        delete: 'Delete',
        welcome: 'Welcome'
      },
      zh: {
        calendar: 'æ—¥æ›†',
        profile: 'å€‹äººè³‡æ–™',
        settings: 'è¨­å®š',
        changeHeader: 'æ›´æ›æ¨™é¡Œåœ–ç‰‡',
        chat: 'ğŸ’¬ èŠå¤©',
        apiSetting: 'APIè¨­å®š',
        addEvent: 'æ–°å¢äº‹ä»¶',
        save: 'å„²å­˜',
        delete: 'åˆªé™¤',
        welcome: 'æ­¡è¿'
      }
    };

    function applyLang(lang) {
      document.querySelector('a[href="calendar.html"]').textContent = texts[lang].calendar;
      document.querySelector('a[href="profile.html"]').textContent = texts[lang].profile;
      document.querySelector('a[href="settings.html"]').textContent = texts[lang].settings;
      document.getElementById('changeHeaderImgBtn').textContent = texts[lang].changeHeader;
      document.getElementById('chatToggle').textContent = texts[lang].chat;
      document.getElementById('openApiSetting').textContent = texts[lang].apiSetting;
      document.querySelector('#eventModal h3').textContent = texts[lang].addEvent;
      document.querySelector('#eventForm button[type="submit"]').textContent = texts[lang].save;
      document.getElementById('deleteEventBtn').textContent = texts[lang].delete;
      // ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
      const userName = localStorage.getItem("userName") || "";
      document.getElementById("welcomeMsg").textContent = `${texts[lang].welcome} ${userName} ã•ã‚“`;
    }

    // åˆæœŸé©ç”¨
    applyLang(savedLang);

    // è¨€èªå¤‰æ›´æ™‚
    langSelect.addEventListener('change', (e) => {
      const lang = e.target.value;
      localStorage.setItem('calendarLang', lang);
      applyLang(lang);
    });
  });
</script>
<script>
  const slider = document.getElementById('volumeSlider');
  const valueDisplay = document.getElementById('volumeValue');

  slider.addEventListener('input', () => {
    valueDisplay.textContent = slider.value;
    // ã“ã“ã§å®Ÿéš›ã«éŸ³é‡ã‚’åæ˜ ã™ã‚‹å‡¦ç†ã‚’æ›¸ãã“ã¨ã‚‚ã§ãã¾ã™
  });
</script>
<script type="module">
  import { applyLang } from './JS/lang.js';

  const langSelect = document.getElementById('langSelect');
  const savedLang = localStorage.getItem('calendarLang') || 'ja';
  langSelect.value = savedLang;

  const userName = localStorage.getItem("userName") || '';
  applyLang(savedLang, userName);

  langSelect.addEventListener('change', (e) => {
    const lang = e.target.value;
    localStorage.setItem('calendarLang', lang);
    applyLang(lang, userName);
  });
</script>


</body>
</html>